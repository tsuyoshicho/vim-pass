<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Vim documentation: pass</title>
<meta name="Generator" content="Vim/9.1">
<meta name="plugin-version" content="vim9.0_v2">
<meta name="syntax" content="help">
<meta name="settings" content="no_progress,ignore_folding,use_css,no_foldcolumn,expand_tabs,ignore_conceal,prevent_copy=,use_input_for_pc=none">
<meta name="colorscheme" content="github">
<style>
<!--
.MissingTag { background-color: black; color: white; }
.EnglishTag { background-color: gray; color: white; }
pre { font-family: monospace; color: #24292e; background-color: #ffffff; }
body { font-family: monospace; color: #24292e; background-color: #ffffff; }
* { font-size: 1em; }
a { color: inherit; }
.Statement { color: #d73a49; }
.Ignore { color: #babbbc; background-color: #ffffff; padding-bottom: 1px; }
.Special { color: #6f42c1; }
.helpExample { font-weight: bold; }
.PreProc { color: #d73a49; }
.Todo { color: #6f42c1; text-decoration: underline; }
.String { color: #032f62; }
-->
</style>
</head>
<body>
Language: <a href="./pass.html">en</a> <a href="././pass.ja.html">ja</a>
<a name="top"></a><h1>Vim documentation: pass</h1>
<a href="./index.html">main help file</a>
<hr>
<pre id='vimCodeElement'>
<a class="String" href="././pass.ja.html" name="pass.txt">pass.txt</a>                                                      日本語ヘルプ

Version :
Author  : Tsuyoshi CHO &lt;Tsuyoshi.CHO+develop@Gmail.com&gt;
License : MIT license  {{{
    Permission is hereby granted, free of charge, to any person obtaining
    a copy of this software and associated documentation files (the
    &quot;Software&quot;), to deal in the Software without restriction, including
    without limitation the rights to use, copy, modify, merge, publish,
    distribute, sublicense, and/or sell copies of the Software, and to
    permit persons to whom the Software is furnished to do so, subject to
    the following conditions:
    The above copyright notice and this permission notice shall be included
    in all copies or substantial portions of the Software.

    THE SOFTWARE IS PROVIDED &quot;AS IS&quot;, WITHOUT WARRANTY OF ANY KIND, EXPRESS
    OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
    MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.
    IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY
    CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT,
    TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE
    SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
}}}

<span class="PreProc">==============================================================================</span>
目次                                            <a class="String" href="././pass.ja.html#pass-contents" name="pass-contents">pass-contents</a>

概要                                            <a class="Identifier" href="././pass.ja.html#pass-introduction">pass-introduction</a>
使い方                                          <a class="Identifier" href="././pass.ja.html#pass-usage">pass-usage</a>
インタフェース                                  <a class="Identifier" href="././pass.ja.html#pass-interface">pass-interface</a>
  変数                                            <a class="Identifier" href="././pass.ja.html#pass-variables">pass-variables</a>
  コマンド                                        <a class="Identifier" href="././pass.ja.html#pass-commands">pass-commands</a>
  関数                                            <a class="Identifier" href="././pass.ja.html#pass-functions">pass-functions</a>
  自動コマンド                                    <a class="Identifier" href="././pass.ja.html#pass-autocommands">pass-autocommands</a>
TODO                                            <a class="Identifier" href="././pass.ja.html#pass-todo">pass-todo</a>
更新履歴                                        <a class="Identifier" href="././pass.ja.html#pass-changelog">pass-changelog</a>


<span class="PreProc">==============================================================================</span>
概要                                            <a class="String" href="././pass.ja.html#pass-introduction" name="pass-introduction">pass-introduction</a>

<a class="String" href="././pass.ja.html#pass" name="pass">pass</a> は Vim password-store APIを目標としたプラグインです。
  Pass: The Standard Unix Password Manager - <span class="String"><a href="https://www.passwordstore.org/">https://www.passwordstore.org/</a></span>
を参照してください。

現在getが使えます。なので emacs の <span class="Comment">auth-source</span> のように使えます。

最新版:
<span class="String"><a href="https://github.com/tsuyoshicho/pass.vim">https://github.com/tsuyoshicho/pass.vim</a></span>

CtrlPのプラグインとしては <a class="Identifier" href="././ctrlp-pass.ja.html#ctrlp-pass">ctrlp-pass</a> を参照してください。
Clapのプラグインとしては <a class="Identifier" href="././clap-pass.ja.html#clap-pass">clap-pass</a> を参照してください。

<span class="PreProc">==============================================================================</span>
使い方                                          <a class="String" href="././pass.ja.html#pass-usage" name="pass-usage">pass-usage</a>

パスワード等の読み出しや設定時に利用

<span class="helpExample"> &quot; in vimrc</span>
<span class="helpExample"> &quot; configured at end of vim startup</span>
<span class="helpExample"> call pass#get_startup('g:test_gh_token','Develop/Github')</span>
<span class="helpExample"> call pass#get_startup('g:test_gh_username','Develop/Github','username')</span>

<span class="helpExample"> function! s:test() abort</span>
<span class="helpExample">   let password = pass#get('Service/foobar')</span>
<span class="helpExample">   &quot; ...</span>
<span class="helpExample"> endfunction</span>


プラグインのパスワード等の設定時に利用

<span class="helpExample"> # in plugin setting(dein's toml)</span>
<span class="helpExample"> [[plugins]]</span>
<span class="helpExample"> repo = 'tsuyoshicho/vim-pass'</span>
<span class="helpExample"> depends = ['ctrlp']</span>
<span class="helpExample"> hook_add = '''</span>
<span class="helpExample">   let g:ctrlp_extensions = get(g:, 'ctrlp_extensions', [])</span>
<span class="helpExample">         \ + ['pass']</span>
<span class="helpExample"> '''</span>

<span class="helpExample"> [[plugins]] # <a href="https://pixe.la/">https://pixe.la/</a></span>
<span class="helpExample"> repo = 'mattn/vim-pixela'</span>
<span class="helpExample"> depends = ['open-browser.vim','vim-pass']</span>
<span class="helpExample"> hook_add = '''</span>
<span class="helpExample">   &quot; let g:pixela_username = 'user'</span>
<span class="helpExample">   &quot; let g:pixela_token    = 'token'</span>

<span class="helpExample">   call pass#get_startup('g:pixela_username','Develop/Pixela','username')</span>
<span class="helpExample">   &quot; VimPixela work OK</span>
<span class="helpExample">   call pass#get_startup('g:pixela_token','Develop/Pixela')</span>
<span class="helpExample">   &quot; startup-time countup do not correct work.</span>
<span class="helpExample">   &quot; It work or does not work depending on the processing order of events</span>
<span class="helpExample"> '''</span>

<span class="helpExample"> [[plugins]]</span>
<span class="helpExample"> repo = 'tpope/vim-rhubarb'</span>
<span class="helpExample"> depends = ['vim-fugitive','vim-pass']</span>
<span class="helpExample"> # on_if= 'executable(&quot;hub&quot;)'</span>
<span class="helpExample"> hook_add = '''</span>
<span class="helpExample">   call pass#get_startup('g:RHUBARB_TOKEN','Develop/Github')</span>
<span class="helpExample"> '''</span>

<span class="helpExample"> [[plugins]]</span>
<span class="helpExample"> repo = 'kyoh86/vim-docbase'</span>
<span class="helpExample"> depends = ['vim-pass']</span>
<span class="helpExample"> hook_add = '''</span>
<span class="helpExample">   let g:docbase = []</span>
<span class="helpExample">   call pass#get_startup_funcall(</span>
<span class="helpExample">         \ { v -&gt;</span>
<span class="helpExample">         \ add(g:docbase,</span>
<span class="helpExample">         \   {</span>
<span class="helpExample">         \     'domain': 'example1',</span>
<span class="helpExample">         \     'token' : v</span>
<span class="helpExample">         \   }</span>
<span class="helpExample">         \  )</span>
<span class="helpExample">         \ },</span>
<span class="helpExample">         \ 'Develop/DocBase1'</span>
<span class="helpExample">         \)</span>
<span class="helpExample">   call pass#get_startup_funcall(</span>
<span class="helpExample">         \ { v -&gt;</span>
<span class="helpExample">         \ add(g:docbase,</span>
<span class="helpExample">         \   {</span>
<span class="helpExample">         \     'domain': 'example2',</span>
<span class="helpExample">         \     'token' : v</span>
<span class="helpExample">         \   }</span>
<span class="helpExample">         \  )</span>
<span class="helpExample">         \ },</span>
<span class="helpExample">         \ 'Develop/DocBase2'</span>
<span class="helpExample">         \)</span>
<span class="helpExample"> '''</span>

<span class="helpExample"> [[plugins]] # Slack</span>
<span class="helpExample"> repo = 'mizukmb/slackstatus.vim'</span>
<span class="helpExample"> depends = ['webapi-vim','vim-pass']</span>
<span class="helpExample"> hook_add = '''</span>
<span class="helpExample">   &quot; let g:slackstatus_token = '&lt;YOUR_SLACK_TOKEN&gt;'</span>
<span class="helpExample">   &quot; my hoge</span>
<span class="helpExample">   call pass#get_startup('g:slackstatus_token','Message/Slack/myhoge.legacy')</span>
<span class="helpExample">   &quot; vim-jp</span>
<span class="helpExample">   &quot; call pass#get_startup('g:slackstatus_token',</span>
<span class="helpExample">   &quot;      \                'Message/Slack/vim-jp.legacy')</span>

<span class="helpExample">   function! s:slack_list(A,L,P) abort</span>
<span class="helpExample">     let slacklist = ['myhoge','vim-jp']</span>
<span class="helpExample">     return slacklist</span>
<span class="helpExample">   endfunction</span>

<span class="helpExample">   function s:slackstatus_change_token(team) abort</span>
<span class="helpExample">     let path = 'Message/Slack/' . a:team . '.legacy'</span>
<span class="helpExample">     let g:slackstatus_token = pass#get(path)</span>
<span class="helpExample">   endfunction</span>

<span class="helpExample">   command! -nargs=1 -complete=customlist,&lt;SID&gt;slack_list</span>
<span class="helpExample">      \ SlackStatusChange :call &lt;SID&gt;slackstatus_change_token(&lt;f-args&gt;)</span>
<span class="helpExample"> '''</span>

<span class="helpExample"> [[plugins]] # Mastodon</span>
<span class="helpExample"> repo = 'mattn/vim-mastodon'</span>
<span class="helpExample"> depends = ['webapi-vim','vim-pass']</span>
<span class="helpExample"> hook_add = '''</span>
<span class="helpExample">   &quot; mstdn.jp</span>
<span class="helpExample">   &quot; let g:mastodon_host = 'mstdn.jp'</span>
<span class="helpExample">   &quot; call pass#get_startup('g:mastodon_access_token',</span>
<span class="helpExample">   &quot;      \                'Message/Mastodon/mstdn.jp')</span>

<span class="helpExample">   function! s:mastodon_completion(A,L,P) abort</span>
<span class="helpExample">     let host_list = ['mstdn.jp']</span>
<span class="helpExample">     return join(host_list,&quot;\n&quot;)</span>
<span class="helpExample">   endfunction</span>

<span class="helpExample">   function s:mastodon_change_hosttoken(host) abort</span>
<span class="helpExample">     let path = 'Message/Mastodon/' . a:host</span>
<span class="helpExample">     let g:mastodon_host = a:host</span>
<span class="helpExample">     let g:mastodon_access_token = pass#get(path)</span>
<span class="helpExample">   endfunction</span>

<span class="helpExample">   command! -nargs=1 -complete=custom,&lt;SID&gt;mastodon_completion</span>
<span class="helpExample">      \ MastodonHostChange :call &lt;SID&gt;mastodon_change_hosttoken(&lt;f-args&gt;)</span>
<span class="helpExample"> '''</span>


<span class="PreProc">==============================================================================</span>
インターフェイス                                <a class="String" href="././pass.ja.html#pass-interface" name="pass-interface">pass-interface</a>

<span class="PreProc">------------------------------------------------------------------------------</span>
変数                                              <a class="String" href="././pass.ja.html#pass-variables" name="pass-variables">pass-variables</a>

g:pass_store_path                                   <a class="String" href="././pass.ja.html#g:pass_store_path" name="g:pass_store_path">g:pass_store_path</a>
        既定値: &quot;~/.password-store&quot;

password-store形式のデータの格納位置です。

g:pass_gpg_path                                     <a class="String" href="././pass.ja.html#g:pass_gpg_path" name="g:pass_gpg_path">g:pass_gpg_path</a>
        既定値: &quot;gpg&quot;

gpg(gnupg)実行ファイルのパスです。
単純にはコマンドだけ書けばよいです。

g:pass_use_agent                                    <a class="String" href="././pass.ja.html#g:pass_use_agent" name="g:pass_use_agent">g:pass_use_agent</a>
        既定値:
                0 (SSH接続 あるいは 非Windows/MacでGUIがないシステム)
                1 (それ以外)

gpg-agentが利用できるか/利用するかの設定です。
1でgpg-agentのpinentryでのパスフレーズ問い合せ、0でvim上での問い合せになります。

リモートや非GUI環境でgpg-agentが使える場合、以下のようなシェルスクリプトが便利
です:
<span class="helpExample">        !/bin/bash</span>
<span class="helpExample">        vim_with_gpg_check () {</span>
<span class="helpExample">          local result=0</span>
<span class="helpExample">          # Run test decoding and use gpg-agent</span>
<span class="helpExample">          local output=$(&lt;gpg password-store decode test using same key&gt;) || result=$?</span>
<span class="helpExample">          if [[ &quot;$result&quot; == &quot;0&quot; ]]; then</span>
<span class="helpExample">            export VIM_PASS_AGENT=1</span>
<span class="helpExample">          else</span>
<span class="helpExample">            export VIM_PASS_AGENT=0</span>
<span class="helpExample">          fi</span>

<span class="helpExample">          # run vim</span>
<span class="helpExample">          vim &quot;$@&quot;</span>

<span class="helpExample">          # delete environment variable</span>
<span class="helpExample">          export -n VIM_PASS_AGENT</span>
<span class="helpExample">        }</span>

<span class="helpExample">        if type vim_with_gpg_check &amp;&gt;/dev/null; then</span>
<span class="helpExample">          alias vim='vim_with_gpg_check'</span>
<span class="helpExample">        fi</span>


その値を受け取る Vim script は以下になります:
<span class="helpExample">        &quot; Check gpg-agent support</span>
<span class="helpExample">        if exists('$VIM_PASS_AGENT')</span>
<span class="helpExample">            &quot; When '1', using agent enabled</span>
<span class="helpExample">            let g:pass_use_agent = ($VIM_PASS_AGENT ==? '1') ? 1 : 0</span>
<span class="helpExample">        endif</span>


シェルスクリプトを使うのは、プラグインはVimの中から gpg-agent へパスフレーズを
渡せないためです。事前に pinentry-curses などで gpg-agent のパスフレーズ入力を
すると、他の操作でも利用されます。

g:pass_entry_altmap                                 <a class="String" href="././pass.ja.html#g:pass_entry_altmap" name="g:pass_entry_altmap">g:pass_entry_altmap</a>
        既定値:
<span class="helpExample">  {</span>
<span class="helpExample">  \ 'password' : ['password', 'secret'],</span>
<span class="helpExample">  \ 'username' : ['user', 'username', 'id', 'account'],</span>
<span class="helpExample">  \ 'host'     : ['host', 'url',      'uri'          ],</span>
<span class="helpExample">  \},</span>


エントリの代替名の辞書 <a href="https://www.google.com/search?q=vim+%22Dictionary%22&lr=lang_ja"><span class="MissingTag">Dictionary</span></a> でキーはラベル、値はリスト <a href="https://www.google.com/search?q=vim+%22List%22&lr=lang_ja"><span class="MissingTag">List</span></a> で、代替
名のリストになっています。&quot;password&quot; は特別な項目のラベルで、デフォルトのパス
ワード情報を指します。&quot;password&quot; ラベルは、内部デフォルト値を使います。&quot;otp&quot;
は特別な項目のラベルで、OTP用パラメータ専用です、代替名などはありません。また、
g:pass_entry_altmap をスクリプトロード前に定義したときは上記設定を追加して動作
します。

<span class="PreProc">------------------------------------------------------------------------------</span>
コマンド                                          <a class="String" href="././pass.ja.html#pass-commands" name="pass-commands">pass-commands</a>

:PassGet <span class="Special">{entry}</span> ...                                <a class="String" href="././pass.ja.html#:PassGet" name=":PassGet">:PassGet</a>

パスワード確認コマンドです、引数にpassword-storeのエントリを入力してください。
引数を必要とし、<span class="Special">{entry}</span>は<span class="Special">&lt;tab&gt;</span>で自動補完できます。

:PassGetOtp <span class="Special">{entry}</span> ...                             <a class="String" href="././pass.ja.html#:PassGetOtp" name=":PassGetOtp">:PassGetOtp</a>

OTP値確認コマンドです、引数にpassword-storeのエントリを入力してください。引数
を必要とし、<span class="Special">{entry}</span>は<span class="Special">&lt;tab&gt;</span>で自動補完できます。

:PassGetRegister <span class="Special">{entry}</span> ...                        <a class="String" href="././pass.ja.html#:PassGetRegister" name=":PassGetRegister">:PassGetRegister</a>

パスワードのレジスタ格納コマンドです、引数にpassword-storeのエントリを入力して
ください。現在限定的に無名レジスタへの永続的なコピーが動きます。引数を必要と
し、<span class="Special">{entry}</span>は<span class="Special">&lt;tab&gt;</span>で自動補完できます。

:PassGetOtpRegister <span class="Special">{entry}</span> ...                     <a class="String" href="././pass.ja.html#:PassGetOtpRegister" name=":PassGetOtpRegister">:PassGetOtpRegister</a>

OTP値のレジスタ格納コマンドです、引数にpassword-storeのエントリを入力してくだ
さい。現在限定的に無名レジスタへの永続的なコピーが動きます。引数を必要とし、
<span class="Special">{entry}</span>は<span class="Special">&lt;tab&gt;</span>で自動補完できます。

<span class="PreProc">------------------------------------------------------------------------------</span>
関数                                              <a class="String" href="././pass.ja.html#pass-functions" name="pass-functions">pass-functions</a>

pass#get(<span class="Special">{entry}</span>, <span class="Special">{...}</span>)                            <a class="String" href="././pass.ja.html#pass#get()" name="pass#get()">pass#get()</a>

パスワード取得API、戻り値に値を返します。
entryはpassword-storeのエントリ形式。
オプションでパスワード以外の項目を指定できます。

pass#get_otp(<span class="Special">{entry}</span>)                               <a class="String" href="././pass.ja.html#pass#get_otp()" name="pass#get_otp()">pass#get_otp()</a>

パスワード取得API、戻り値にOTP値を返します。
entryはpassword-storeのエントリ形式。

pass#get_register(<span class="Special">{entry}</span>, <span class="Special">{...}</span>)                   <a class="String" href="././pass.ja.html#pass#get_register()" name="pass#get_register()">pass#get_register()</a>

パスワード取得API、レジスタに値を設定します。
entryはpassword-storeのエントリ形式。
オプションでパスワード以外の項目を指定できます。
限定的に動作し、無名レジスタへコピーします。
{まだ動作しません。}
時間経過でレジスタから消える予定。

pass#get_otp_register(<span class="Special">{entry}</span>)                      <a class="String" href="././pass.ja.html#pass#get_otp_register()" name="pass#get_otp_register()">pass#get_otp_register()</a>

パスワード取得API、レジスタにOTP値を設定します。
entryはpassword-storeのエントリ形式。
オプションでパスワード以外の項目を指定できます。
限定的に動作し、無名レジスタへコピーします。
{まだ動作しません。}
時間経過でレジスタから消える予定。

                                                   <a class="String" href="././pass.ja.html#pass#get_startup()" name="pass#get_startup()">pass#get_startup()</a>
pass#get_startup(<span class="Special">{set-variable}</span>,<span class="Special">{entry}</span>, <span class="Special">{...}</span>)

パスワード取得API、起動時前専用で、set-variableに値を設定します。
entryはpassword-storeのエントリ形式。
オプションでパスワード以外の項目を指定できます。
set-variableはスコープ付きの変数を表す文字列です(ex. 'g:hoge_fuga')
<span class="Todo">Note:</span> StartUp API はオートロード関数で、他のプラグインのsource前から使えます
(autoloadの動的読み込み機能を使って対応)。

                                                    <a class="String" href="././pass.ja.html#pass#get_startup_scope()" name="pass#get_startup_scope()">pass#get_startup_scope()</a>
pass#get_startup_scope(<span class="Special">{scope}</span>,<span class="Special">{set-variable}</span>,<span class="Special">{entry}</span>, <span class="Special">{...}</span>)

パスワード取得API、起動時前専用で、set-variableに値を設定します。
entryはpassword-storeのエントリ形式。
オプションでパスワード以外の項目を指定できます。
scopeには <a href="https://www.google.com/search?q=vim+%22get()%22&lr=lang_ja"><span class="MissingTag">get()</span></a> と同じように、g:やw:などのスコープを設定します。
set-variableはスコープなしの変数を表す文字列です(ex. 'hoge_fuga')
<span class="Todo">Note:</span> StartUp API はオートロード関数で、他のプラグインのsource前から使えます
(autoloadの動的読み込み機能を使って対応)。

                                                    <a class="String" href="././pass.ja.html#pass#get_startup_funcall()" name="pass#get_startup_funcall()">pass#get_startup_funcall()</a>
pass#get_startup_funcall(<span class="Special">{funcref}</span>,<span class="Special">{entry}</span>, <span class="Special">{...}</span>)

パスワード取得API、起動時前専用で、値付きで<span class="Special">{funcref}</span>を呼びます。
entryはpassword-storeのエントリ形式。
オプションでパスワード以外の項目を指定できます。
解決したパスワードを引数として、<span class="Special">{funcref}</span>を実行します。
<span class="Todo">Note:</span> StartUp API はオートロード関数で、他のプラグインのsource前から使えます
(autoloadの動的読み込み機能を使って対応)。

pass#resolve_startup()                              <a class="String" href="././pass.ja.html#pass#resolve_startup()" name="pass#resolve_startup()">pass#resolve_startup()</a>

<span class="PreProc">------------------------------------------------------------------------------</span>
自動コマンド                                      <a class="String" href="././pass.ja.html#pass-autocommands" name="pass-autocommands">pass-autocommands</a>

User VimPassStartUpResolve                          <a class="String" href="././pass.ja.html#VimPassStartUpResolve" name="VimPassStartUpResolve">VimPassStartUpResolve</a>

処理された <a class="Identifier" href="././pass.ja.html#pass#resolve_startup()">pass#resolve_startup()</a> が完了したときにイベントを呼び出します(複
数)。

<span class="PreProc">==============================================================================</span>
<span class="Statement">TODO</span>                                            <a class="String" href="././pass.ja.html#pass-todo" name="pass-todo">pass-todo</a>

* PassGetRegisterの実装
* set系の実装

<span class="PreProc">==============================================================================</span>
更新履歴                                        <a class="String" href="././pass.ja.html#pass-changelog" name="pass-changelog">pass-changelog</a>

see git log

<span class="PreProc">==============================================================================</span>
vim&#0058;tw=78:fo=tcq2mM:ts=8:ft=help:norl:noet:
</pre>
<hr>
<a href="#top">top</a> - <a href="./index.html">main help file</a> - <a href="./tags.ja.html">tag index</a> <br>
Language: <a href="./pass.html">en</a> <a href="././pass.ja.html">ja</a>
</body>
</html>
<!-- vim: set foldmethod=manual : -->
